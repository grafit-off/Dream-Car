document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".animate-item"),o=(e,t,o)=>{let n=e.getBoundingClientRect();n.top+n.height-n.height*o>0&&window.innerHeight-n.top-n.height*t>0?e.classList.add("animated"):e.hasAttribute("data-animation-once")||e.classList.remove("animated")};0!=e.length&&(e.forEach(e=>{o(e,.5,.5)}),document.addEventListener("scroll",()=>{e.forEach(e=>{o(e,.5,.5)})}));const n=null!=navigator.userAgent.match(/iPhone/i),r=null!=navigator.userAgent.match(/iPad/i),a=null!=navigator.userAgent.match(/iPod/i);let l=()=>{let e=window.scrollY;document.querySelector("html").style.scrollBehavior="auto",document.body.classList.add("ios-lock"),document.body.dataset.position=e,document.body.style.top=-e+"px"},c=()=>{let e=parseInt(document.body.dataset.position,10);document.body.style.top="auto",document.body.classList.remove("ios-lock"),window.scroll({top:e,left:0}),document.querySelector("html").removeAttribute("style"),document.body.removeAttribute("data-position")};const i=document.querySelector("body"),s=document.querySelectorAll(".modal-btn"),d=document.querySelectorAll(".fixed-padding"),u=document.querySelectorAll(".close-modal");let m,h,p,y=!0,g=!1;if(s.length>0)for(let e=0;e<s.length;e++){const t=s[e];t.addEventListener("click",(function(e){const o=t.dataset.path,n=document.getElementById(o);null!=n?(v(n),setTimeout(()=>{u.forEach(e=>{e.focus()})},100),e.preventDefault()):console.log("Модальное окно не существует! "+n)}))}if(u.length>0)for(let e=0;e<u.length;e++){const t=u[e];m=t,t.addEventListener("click",(function(e){f(t.closest(".modal")),e.preventDefault()}))}function v(e){if(e&&y){p=document.activeElement;const t=document.querySelector(".modal.open");t?f(t,!1):function(){const e=window.innerWidth-i.offsetWidth+"px";if(d.length>0)for(let t=0;t<d.length;t++){d[t].style.paddingRight=e}i.style.paddingRight=e,i.classList.contains("lock")?h=!1:(h=!0,n||r||a?l():i.classList.add("lock"));y=!1,setTimeout((function(){y=!0}),800)}(),e.classList.add("open"),e.addEventListener("mousedown",(function(e){!1===g?(e.target.closest(".modal__content")||f(e.target.closest(".modal")),g=!0):setTimeout(()=>{g=!1},800)}))}}function f(e,t=!0){y&&(e.classList.remove("open"),t&&setTimeout((function(){if(d.length>0)for(let e=0;e<d.length;e++)d[e].style.paddingRight="0px";i.style.paddingRight="0px",1==h&&(n||r||a?c():i.classList.remove("lock"))}),800)),setTimeout((function(){p.focus()}),800)}document.addEventListener("keydown",(function(e){if(document.querySelector(".modal.open")&&27===e.which){f(document.querySelector(".modal.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);const S=document.querySelector(".theme-switcher"),q=e=>{localStorage.setItem("site-theme",e),document.documentElement.className=e};void 0===localStorage.getItem("site-theme")||null===localStorage.getItem("site-theme")?q("light-theme"):(q(localStorage.getItem("site-theme")),"dark-theme"===localStorage.getItem("site-theme")?S.textContent="Светлая тема":S.textContent="Тёмная тема");S.addEventListener("click",()=>{"dark-theme"===localStorage.getItem("site-theme")?(q("light-theme"),S.textContent="Тёмная тема"):(q("dark-theme"),S.textContent="Светлая тема")});new Swiper(".swiper",{containerModifierClass:"swiper",wrapperClass:"swiper__wrapper",slideClass:"swiper__slide",loop:!0,breakpoints:{320:{slidesPerView:2.05,spaceBetween:10,pagination:!1},480:{slidesPerView:3,spaceBetween:15,navigation:!1,pagination:{el:".hero-buttons__pagination",clickable:!0}},992:{slidesPerView:3,spaceBetween:15,pagination:{el:".hero-buttons__pagination",clickable:!0},navigation:{nextEl:".hero-buttons__swiper--next",prevEl:".hero-buttons__swiper--prev"}}}});if(n||r||a){let e=document.querySelectorAll('[href^="#"]'),o=.2;for(let n=0;n<e.length;n++)e[n].addEventListener("click",(function(e){e.preventDefault();let n=window.pageYOffset,r=this.href.replace(/[^#]*(.*)/,"$1");t=document.querySelector(r).getBoundingClientRect().top,start=null,requestAnimationFrame((function e(a){null===start&&(start=a);let l=a-start,c=t<0?Math.max(n-l/o,n+t):Math.min(n+l/o,n+t);window.scrollTo(0,c),c!=n+t?requestAnimationFrame(e):location.hash=r}))}),!1)}const w=document.querySelectorAll(".accordion__trigger"),b=e=>{e.disabled=!0,setTimeout(()=>{e.disabled=!1},500)},_=(e,t)=>{t.style.height=t.scrollHeight+"px","0px"!==t.style.height&&"0px"!==window.getComputedStyle(t).height||(e.classList.add("accordion__trigger--active"),e.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false"),t.classList.remove("accordion__body--hidden"))},k=(e,t)=>{"0px"!==t.style.height&&"0px"!==window.getComputedStyle(t).height&&(e.classList.remove("accordion__trigger--active"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true"),t.style.height=t.scrollHeight+"px",setTimeout(()=>{t.style.height="0"},0),setTimeout(()=>{t.classList.add("accordion__body--hidden")},500))},E=e=>{e.addEventListener("transitionend",()=>{"0px"!==e.style.height&&(e.style.height="auto")})};w.forEach(e=>{e.addEventListener("click",e=>{(e=>{const t=e,o=e.closest(".accordion__item").querySelector(".accordion__body");E(o),k(t,o),_(t,o),b(t)})(e.currentTarget)})});const L=[document.querySelector(".hero-buttons__order"),document.querySelector(".hero__btn")],A=document.querySelector(".accordion__constructor-form");L.forEach(e=>{e.addEventListener("click",()=>{let o=e.dataset.accpath,n=document.querySelector(".accordion").querySelector(`[data-accpath="${o}"]`),r=n.querySelector(".accordion__trigger"),a=n.querySelector(".accordion__body");b(r),b(e),_(r,a),E(a),setTimeout(()=>{(()=>{V=.7;let e=window.pageYOffset;t=A.getBoundingClientRect().top,start=null,requestAnimationFrame((function o(n){null===start&&(start=n);let r=n-start,a=t<0?Math.max(e-r/V,e+t):Math.min(e+r/V,e+t);window.scrollTo(0,a),a!=e+t&&requestAnimationFrame(o)}))})(),document.querySelector('[name="Форма ячейки"]').focus()},500)})});document.querySelectorAll(".accordion-close").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".accordion__item"),o=t.querySelector(".accordion__trigger"),n=t.querySelector(".accordion__body");b(e),b(o),k(o,n),o.focus()})});const x=document.querySelector(".image-preview__current"),T=document.querySelector(".image-preview__list");T.addEventListener("click",e=>{(e=>{let t=x.getAttribute("src"),o=x.getAttribute("alt"),n=e.getAttribute("src"),r=e.getAttribute("alt");x.setAttribute("src",""+n),x.setAttribute("alt",""+r),e.setAttribute("src",""+t),e.setAttribute("alt",""+o)})(e.target.querySelector(".preview-item__image"))});const C=document.querySelector(".schild__input"),N=document.querySelector(".schild__plus"),I=document.querySelector(".schild__minus"),R=document.querySelector(".order-info__list"),j=document.querySelector('input[value="Металлический подпятник"]'),M=document.querySelector('input[value="Передний ряд"]'),O=document.querySelector('input[value="Задний ряд"]'),P=document.querySelector('input[value="Багажник"]'),B=document.querySelector(".price-block__price");let D=0,H=0;const F=()=>{B.textContent=D+H},J=()=>{if(0===R.children.length){const e=document.createElement("li");e.className="order-info__item main-text order-clear",e.textContent=" Здесь пусто",R.append(e)}},$=(e,t,o,n)=>{if(e.checked){D+=n;const e=document.createElement("li");e.className="order-info__item main-text "+t,e.textContent=" "+o,R.append(e),document.querySelector(".order-clear")&&document.querySelector(".order-clear").remove()}else null!==document.querySelector("."+t)&&(D-=n,document.querySelector("."+t).remove(),J());F()},Y=()=>{if(H=50*parseInt(C.value,10),0!==parseInt(C.value,10)){if(null===document.querySelector(".order-schild")){const e=document.createElement("li");e.className="order-info__item main-text order-schild",e.innerHTML=` Фирменные шильды ${C.value} шт.`,R.append(e)}else document.querySelector(".order-schild").textContent=` Фирменные шильды ${C.value} шт.`;document.querySelector(".order-clear")&&document.querySelector(".order-clear").remove()}else null!==document.querySelector(".order-schild")&&(document.querySelector(".order-schild").remove(),J());F()};C.addEventListener("blur",()=>{C.value<101&&C.value>=0||(C.value=0),Y()}),C.addEventListener("keydown",()=>{isNaN(parseInt(C.value,10))&&(C.value=0)}),N.addEventListener("click",()=>{(()=>{let e=parseInt(C.value,10);e=isNaN(e)?0:++e,e>100&&(e=0),C.value=e})(),Y()}),I.addEventListener("click",()=>{(()=>{let e=parseInt(C.value,10);e=isNaN(e)?0:--e,e<0&&(e=100),C.value=e})(),Y()}),C.addEventListener("keydown",e=>{"Enter"==e.key&&Y()}),$(j,"order-heel","Подпятник",500),j.addEventListener("change",()=>{$(j,"order-heel","Подпятник",500)}),$(M,"order-front-row","Комплект ковриков для переднего ряда",1700),M.addEventListener("change",()=>{$(M,"order-front-row","Комплект ковриков для переднего ряда",1700)}),$(O,"order-back-row","Комплект ковриков для заднего ряда",1600),O.addEventListener("change",()=>{$(O,"order-back-row","Комплект ковриков для заднего ряда",1600)}),P.addEventListener("change",()=>{$(P,"order-trunk","Коврик для багажника",1e3)});const W=document.querySelectorAll('input[type="tel"]');new Inputmask("+7 (999) 999-99-99").mask(W);new Inputmask("999",{placeholder:""}).mask(C);let z=!1;const G=(e,t)=>{new window.JustValidate(e,{rules:t,messages:{name:{required:"Это поле обязательно!"},auto:{required:"Это поле обязательно!"},tel:{required:"Это поле обязательно!"},email:{required:"Это поле обязательно!",email:"Пожалуйста! Введите действительный эмейл!"}},submitHandler:(e,t,o)=>{z=!0}})};G(".form",{name:{required:!0},auto:{required:!0},tel:{required:!0}}),G(".call-form",{name:{required:!0},tel:{required:!0}}),G(".reviews-form",{name:{required:!0},email:{required:!0,email:!0}});const K=document.querySelector(".snackbar-btn"),Q=document.querySelector(".snackbar");function U(e=Q.textContent,t,o=3100,n=0){Q.textContent=e,K&&(K.disabled=!0),setTimeout(()=>{Q.removeAttribute("hidden"),0==t?(Q.classList.add("show-notification"),setTimeout(()=>{Q.className=Q.className.replace("show-notification",""),Q.setAttribute("hidden","")},o)):1==t&&(Q.classList.add("show-attention"),setTimeout(()=>{Q.className=Q.className.replace("show-attention",""),Q.setAttribute("hidden","")},o)),K&&setTimeout(()=>{K.disabled=!1},o)},n)}const X=document.querySelector(".form"),Z=document.querySelector(".form__submit"),ee={};X.addEventListener("submit",async e=>{if(e.preventDefault(),Z.disabled=!0,setTimeout(()=>{Z.disabled=!1},1e3),z){const e=document.querySelector('input[name="Имя"]').value,t=document.querySelector('input[name="Модель автомобиля"]').value,o=W.value,n=j.checked,r=M.checked,a=O.checked,l=P.checked,c=C.value,i=document.querySelectorAll('input[name="Цвет окантовки"]'),s=document.querySelectorAll('input[name="Цвет полотна"]'),d=document.querySelectorAll('input[name="Форма ячейки"]');ee.order={},ee.order.name=e,ee.order.tel=o,ee.order.auto=t,ee.order.heel=n,ee.order.frontRow=r,ee.order.backRow=a,ee.order.trunk=l,ee.order.schild=c,d.forEach(e=>{e.checked&&(ee.order.shape=e.value)}),s.forEach(e=>{e.checked&&(ee.order.canvas=e.value)}),i.forEach(e=>{e.checked&&(ee.order.edging=e.value)});let u=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(ee),headers:{"Content-type":"application/json; charset=utf-8"}});if(console.log("Sending data..."),await u.ok){console.log("Response status: "+await u.status);let e=X.closest(".modal"),t=await u.json();console.log("Request data..."),console.log(t),f(e),setTimeout(()=>{U(void 0,0)},800)}}});const te=document.querySelector(".call-form"),oe=document.querySelector(".call-form__submit");te.addEventListener("submit",async e=>{if(e.preventDefault(),oe.disabled=!0,setTimeout(()=>{oe.disabled=!1},1e3),z){console.log("Sending data..."),ee.callback={};const e=te.querySelector('input[name="name"]').value,t=te.querySelector('input[name="tel"]').value;ee.callback.name=e,ee.callback.tel=t;let o=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(ee),headers:{"Content-Type":"application/json; charset=utf-8"}});if(await o.ok){console.log("Request data..."),console.log("Status: "+await o.status);let e=await o.json();console.log(e),U("Спасибо! Мы скоро Вам перезвоним!","0")}}});const ne=document.querySelector(".reviews-form"),re=document.querySelector(".reviews-form__submit");ne.addEventListener("submit",async e=>{if(e.preventDefault(),re.disabled=!0,setTimeout(()=>{re.disabled=!1},1e3),z){console.log("Sending data..."),ee.review={};const e=ne.querySelector('input[name="name"]').value,t=ne.querySelector('input[name="email"]').value,o=ne.querySelector('input[name="subject"]').value,n=ne.querySelector('textarea[name="message"]').value;ee.review.name=e,ee.review.email=t,ee.review.subject=o,ee.review.message=n;let r=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(ee),headers:{"Content-Type":"application/json; charset=utf-8"}});if(await r.ok){console.log("Request data..."),console.log("Status: "+await r.status);let e=await r.json();console.log(e),U("Спасибо за отзыв!","0")}}})});
//# sourceMappingURL=main.js.map
